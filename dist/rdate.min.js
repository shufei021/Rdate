!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Rdate=e()}(this,function(){"use strict";function e(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function f(a){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach(function(t){var e,n,r;e=a,r=o[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(o,t))})}return a}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t){return t?new Date("string"==typeof t&&-1<t.indexOf("-")?t.replace(/-/g,"/"):t):new Date}function s(t,e){var n=u(t,2),r=n[0],a=n[1],o=new Date,i=e;return 1==t.length?isNaN(new Date(r).valueOf())?i=r:o=new Date("string"==typeof r?r.replace(/-/g,"/"):r):2<=t.length&&(o=new Date("string"==typeof r?r.replace(/-/g,"/"):r),i=a),{dt:o,format:i}}function a(t){var e=0<arguments.length&&void 0!==t?t:new Date,n=y(e);return{year:n.getFullYear(),month:n.getMonth()+1,date:n.getDate(),hour:n.getHours(),minute:n.getMinutes(),second:n.getSeconds(),millisecond:n.getMilliseconds()}}function l(t){var e=new Date;return e.setDate(e.getDate()-1),e.toLocaleDateString()===new Date(t).toLocaleDateString()}function c(t){return a(t).year}function d(t){return a(t).month}function g(t){return a(t).date}function D(t){var e=y(t).getHours();return["凌晨","早上","上午","中午","下午","晚上","深夜"][0<=e&&e<=6?0:6<e&&e<=8?1:8<e&&e<=12?2:12<e&&e<=14?3:14<e&&e<=18?4:18<e&&e<=21?5:6]}function h(t,e){var n=0<arguments.length&&void 0!==t?t:new Date;return(1<arguments.length&&void 0!==e?e:"星期")+["日","一","二","三","四","五","六"][y(n).getDay()]}function v(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=s(e,"yyyy-MM-dd").dt,a=s(e,"yyyy-MM-dd").format,o=0==r.getDay()?7:r.getDay();return r.setDate(r.getDate()-o+1),{first:b(r,a),last:b(new Date(r.getFullYear(),r.getMonth(),r.getDate()+6),a)}}function p(t,e){var n=0<arguments.length&&void 0!==t?t:new Date,r=1<arguments.length&&void 0!==e?e:"yyyy-MM-dd",a=new Date(n),o=0==a.getDay()?7:a.getDay();a.setDate(a.getDate()-o+1);var i=b(a,r);return a.setDate(a.getDate()+4),{first:i,last:b(a,r)}}function w(t){var e=y(t),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),0,1),a=Math.round((n-r)/864e5);return Math.ceil((a+(r.getDay()+1-1))/7)}var M=function(t,e,n){var r=0<arguments.length&&void 0!==t?t:0,a=1<arguments.length&&void 0!==e?e:new Date,o=2<arguments.length?n:void 0,i=y(a);return i.setDate(i.getDate()+r),b(i,o||"yyyy-MM-dd")},o=function(t){for(var e=y(t),n={},r=1,a=!0,o=m(e),i=e.getMonth()+1,u=e.getFullYear()+"-"+String(i).padStart(2,0)+"-",l=1;l<o+1;l++){var c=v(u+l),g=c.last;d(g)!==i&&a?(r++,a=!1):1==new Date(u+l).getDay()&&r++,n[u+String(l).padStart(2,0)]=f(f({},c),{},{w:r,d:o})}return n},m=function(t){var e=y(t);return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},b=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=s(e,"yyyy-MM-dd hh:mm:ss").dt,a=s(e,"yyyy-MM-dd hh:mm:ss").format,o={"M+":String(r.getMonth()+1).padStart(2,0),"d+":String(r.getDate()).padStart(2,0),"h+":String(r.getHours()).padStart(2,0),"m+":String(r.getMinutes()).padStart(2,0),"s+":String(r.getSeconds()).padStart(2,0)},i=String(r.getFullYear()),u=[];(a=a.replace(/\[(.+?)\]/g,function(t){return u.push(t.slice(1,-1)),"|"})).includes("w")&&(a=a.replace(/((w)+)/g,function(){return h(r)})),a.includes("W")&&(a=a.replace(/((W)+)/g,function(){return h(r,"周")})),a.includes("t")&&(a=a.replace(/((t)+)/g,function(){return D(r)})),a.includes("Y")&&(a=a.replace(/((Y)+)/g,function(t){return i.substr(4-t.length)})),a.includes("y")&&(a=a.replace(/((y)+)/g,function(t){return i.substr(4-t.length)})),a.includes("H")&&(a=a.replace(/((H)+)/g,function(t){return o["h+"].substr(0,t.length)}));for(var l in o)!function(e){a.includes(e.substr(0,1))&&(a=a.replace(new RegExp(e,"g"),function(t){return 1==t.length?+o[e]:o[e].substr(0,t.length)}))}(l);for(var c=a.split("|"),g="",f=0;f<c.length;f++)g+=c[f]+u[f];return"undefined"===(g+" ").slice(-10,-1)&&"|"!==c[c.length-1]&&(g=g.slice(0,-9)),g};function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.version="1.0.0",this.author="rookie_fly",this.update="2020-8-30"}return t.prototype={format:b,year:c,month:d,date:g,hour:function(t){return a(t).hour},minute:function(t){return a(t).minute},second:function(t){return a(t).second},millisecond:function(t){return a(t).millisecond},quarter:function(t){var e=y(t).getMonth();return e<3?1:e<6?2:e<9?3:4},when:D,get:function(e,t){return a(t)[Object.keys(a(t)).find(function(t){return t.charAt(0)===e||t===e||t.charAt(0)+t.charAt(5)===e||"month"===t&&"M"==e})]},toArray:function(t){return Object.values(a(t)).slice(0,6)},toObject:function(t){var e=a(t);return delete e.millisecond,e},previwWeekByDate:h,previwMonthByDate:function(t,e){var n=0<arguments.length&&void 0!==t?t:new Date,r=1<arguments.length&&void 0!==e?e:"月";return["一","二","三","四","五","六","七","八","九","十","十一","十二"][y(n).getMonth()]+r},previewWeek:function(t,e,n){var r=2<arguments.length?n:void 0;return 0===t&&(t=7),0<t&&t<8?(1<arguments.length&&void 0!==e?e:"周")+["一","二","三","四","五","六","日"][t-1]:void 0===r?"Invalid week":r},previewMonth:function(t,e){return 0<t&&t<13?["一","二","三","四","五","六","七","八","九","十","十一","十二"][t-1]+"月":void 0===e?"Invalid month":e},previewMoment:function(t){var e=+new Date(y(t)),n=+new Date,r=parseInt((n-e)/1e3),a=parseInt(r/60),o=parseInt(r/3600);return r<=60?"刚刚":a<60?a+"分钟前":g(y(t))===g()?o+"小时前":l(y(t))?"昨天":c(y(t))===c()?b(y(t),"M月d日"):b(y(t),"YYYY/MM/dd")},weekFirstLast:v,monthFirstLast:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=s(e,"yyyy-MM-dd").dt,a=s(e,"yyyy-MM-dd").format;return{first:b(new Date(r.getFullYear(),r.getMonth(),1),a),last:b(new Date(r.getFullYear(),r.getMonth()+1,0),a)}},getCurWeekFirstDay:function(){return v(new Date,"yyyy-MM-dd").first},getCurWeekLastDay:function(){return v(new Date,"yyyy-MM-dd").last},getMonthFirstDay:function(t){var e=y(t);return b(e,"yyyy-MM-")+"01"},getMonthLastDay:function(t){var e=y(t);return e.setMonth(e.getMonth()+1),e.setDate(1),e.setDate(e.getDate()-1),b(e,"yyyy-MM-dd")},getDaysByDate:function(t,e){var n=parseInt(Math.abs(new Date(t)-new Date(e))/864e5);return isNaN(n)?0:n},getHalfYear:function(t){return b(new Date(y(t)-15768e6),"yyyy-MM-dd")},getGapDate:M,getGapWeek:function(t,e,n){var r=0<arguments.length&&void 0!==t?t:0,a=1<arguments.length&&void 0!==e?e:new Date,o=2<arguments.length&&void 0!==n?n:"yyyy-MM-dd",i=v(a,o),u=i.first,l=i.last;return r?v(M(7*r,0<r?l:u),o):{first:u,last:l}},getGapYearDate:function(t,e,n){var r=0<arguments.length&&void 0!==t?t:0,a=1<arguments.length&&void 0!==e?e:new Date,o=2<arguments.length&&void 0!==n?n:"yyyy-MM-dd",i=y(a);return i.setFullYear(i.getFullYear()+r),b(i,o)},getGapMonthDate:function(t,e,n){var r=0<arguments.length&&void 0!==t?t:0,a=1<arguments.length&&void 0!==e?e:new Date,o=2<arguments.length&&void 0!==n?n:"yyyy-MM-dd",i=y(a);return i.setMonth(i.getMonth()+r),b(i,o)},getWeekByDate:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:"yyyy-MM-dd";if(!t)return"";var a=y(e),o=0===t?7:t,i=0===a.getDay()?7:a.getDay();return o!==i&&a.setDate(a.getDate()-(i-o)),b(a,r)},getMonthWeek:function(t){var e=b(y(t),"yyyy-MM-dd");return o(e)[e].w},getYearWeek:w,getQuarterWeek:function(t){var e=y(t),n=e.getFullYear(),r=e.getMonth()+1,a=e.getDate(),o=w([n,r,a].join("/"));if(r<4)return o;var i=r<7?4:r<10?7:10,u=o-w([n,i,1].join("/"));return 1<new Date(n,i,1).getDay()&&(u+=1),u},getWeekWorkday:p,getGapWeekWorkday:function(t,e,n){var r=0<arguments.length&&void 0!==t?t:0,a=1<arguments.length&&void 0!==e?e:new Date,o=2<arguments.length&&void 0!==n?n:"yyyy-MM-dd",i=p(a),u=i.first,l=i.last;return r?p(M(5*r,0<r?l:u),o):{first:u,last:l}},getMonthDays:m,getMonthWeekInfo:o,getPassDaysDate:function(t,e){return arguments.length?i(Array(+t+1).keys()).map(function(t){return new Date((e?new Date(e):Date.now())-864e5*t).toLocaleDateString()}).map(function(t){return t.split(/\/|-/).map(function(t){return t.padStart(2,"0")}).join("-")}).splice(1):[]},getBetweenDates:function(r,t){if(!r)return[];function a(t,e){return new Date(+new Date(t)+864e5*e).toLocaleDateString().replace(/\//g,"-")}var e=+new Date(new Date(r).toLocaleDateString()),n=t?+new Date(new Date(t).toLocaleDateString()):+new Date((new Date).toLocaleDateString());if(e==n)return[a(new Date(t?new Date:r),0)];r=e<n?new Date(e):new Date(t?n:+new Date),t=e<n?new Date(t?n:+new Date):new Date(e);var o=parseInt(Math.abs(e-n)/864e5)+1;return Array(o).fill(0).reduce(function(t,e,n){return[].concat(i(t),[a(r,n)])},[])},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},isTime:function(t){var e=t.match(/^(\d{1,2})(:)?(\d{1,2})\2(\d{1,2})$/);return null!=e&&!(24<=e[1]||60<=e[3]||60<=e[4])},isDate:function(t){var e=t.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(null==e)return!1;var n=new Date(e[1],e[3]-1,e[4]);return n.getFullYear()==e[1]&&n.getMonth()+1==e[3]&&n.getDate()==e[4]},isDateTime:function(t){var e=t.match(/^(\d{4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/);if(null==e)return!1;var n=new Date(e[1],e[3]-1,e[4],e[5],e[6],e[7]);return n.getFullYear()==e[1]&&n.getMonth()+1==e[3]&&n.getDate()==e[4]&&n.getHours()==e[5]&&n.getMinutes()==e[6]&&n.getSeconds()==e[7]},isToday:function(t){return(new Date).toLocaleDateString()==new Date("string"==typeof t?t.replace(/-/g,"/"):t).toLocaleDateString()},isYesterday:l,getStamp:function(t,e){var n=arguments;if(!n.length)return+new Date;1==n.length&&"number"==typeof n[0]&&(e=n[0],t=void 0);var r=y(t);return r.setDate(r.getDate()+(void 0===e?0:e)),+r},getStampBeforAfter:function(t){var e,n=y(t);return n.setDate(n.getDate()-1),e=+n,n.setDate(n.getDate()+2),{before:e,after:+n}},getStampStartEnd:function(t){var e=y(t);return{start:+new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),end:+new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59)}},getDaysByStamp:function(t,e){return parseInt(Math.abs(t-e)/864e5)}},t});
