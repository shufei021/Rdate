!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Rdate=t()}(this,function(){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}return function(){function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.version="1.0.1",this.author="rookie_fly",this.creator="rookie_fly",this.createDate="2018-07-27",this.updateDate="2020-08-23"}var e,t,n;return e=c,n=[{key:"_dt",value:function(e){return e?new Date("string"==typeof e&&-1<e.indexOf("-")?e.replace(/-/g,"/"):e):new Date}},{key:"isMatch",value:function(e,t){var n=e.indexOf("[",t),a=e.indexOf("]",t),r=e.lastIndexOf("[",t),u=e.lastIndexOf("]",t);return-1<a&&-1<r&&(-1==n&&-1==u||(-1<n&&-1==u?r<u:a<n))}}],(t=[{key:"format",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r,u,o=n[0],i=n[1];n.length?1==n.length?isNaN(new Date(o).valueOf())?(u=o,r=new Date):(r=new Date("string"==typeof o?o.replace(/-/g,"/"):o),u="yyyy-MM-dd hh:mm:ss"):2<=n.length&&(r=new Date("string"==typeof o?o.replace(/-/g,"/"):o),u=i):(r=new Date,u="yyyy-MM-dd hh:mm:ss");var l={"y+":String(r.getFullYear()),"M+":String(r.getMonth()+1).padStart(2,0),"d+":String(r.getDate()).padStart(2,0),"h+":String(r.getHours()).padStart(2,0),"m+":String(r.getMinutes()).padStart(2,0),"s+":String(r.getSeconds()).padStart(2,0)};u=u.replace(new RegExp(/\[(.+?)\]/g),function(e){return"["+window.btoa(e.slice(1,-1))+"]"}),u.includes("w")&&(u=u.replace(/((w)+)/g,function(){return e.week(r)})),u.includes("t")&&(u=u.replace(/((t)+)/g,function(){return e.when(r)}));for(var g in l)!function(a){u.includes(a.substr(0,1))&&(u=u.replace(new RegExp(a,"g"),function(e,t,n){return c.isMatch(u,t)?e:l[a].substr(0,e.length)}))}(g);return u=u.replace(new RegExp(/\[(.+?)\]/g),function(e,t,n){return window.atob(e.slice(1,-1))}),u}},{key:"getStamp",value:function(e,t){var n=arguments;if(!n.length)return(new Date).getTime();1==n.length&&"number"==typeof n[0]&&(t=n[0],e=void 0);var a=c._dt(e);return a.setDate(a.getDate()+(void 0===t?0:t)),+a}},{key:"getStampBeforAfter",value:function(e){var t,n=c._dt(e);return n.setDate(n.getDate()-1),t=+n,n.setDate(n.getDate()+2),{before:t,after:+n}}},{key:"getStampStartEnd",value:function(e){var t=c._dt(e);return{start:+new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),end:+new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59)}}},{key:"getDaysByStamp",value:function(e,t){return parseInt(Math.abs(e-t)/864e5)}},{key:"getCurWeekFirstDay",value:function(){var e=new Date,t=new Date(e-864e5*(e.getDay()-1));return this.format(t,"yyyy-MM-dd")}},{key:"getCurWeekLastDay",value:function(){var e=new Date(this.getCurWeekFirstDay()+" 00:00:00");return e.setDate(e.getDate()+6),this.format(e,"yyyy-MM-dd")}},{key:"getMonthFirstDay",value:function(e){var t=c._dt(e);return this.format(t,"yyyy-MM-")+"01"}},{key:"getMonthLastDay",value:function(e){var t=c._dt(e);return t.setMonth(t.getMonth()+1),t.setDate(1),t.setDate(t.getDate()-1),this.format(t,"yyyy-MM-dd")}},{key:"getDaysByDate",value:function(e,t){return parseInt(Math.abs(new Date(e)-new Date(t))/864e5)}},{key:"getHalfYear",value:function(e){return this.format(new Date(c._dt(e)-15768e6),"yyyy-MM-dd")}},{key:"getGapYearDate",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:0,a=c._dt(1<arguments.length?t:void 0);return a.setFullYear(a.getFullYear()+n),this.format(a,"yyyy-MM-dd")}},{key:"getGapMonthDate",value:function(e,t){var n=c._dt(t);return n.setMonth(n.getMonth()+e),this.format(n,"yyyy-MM-dd")}},{key:"getWeekByDate",value:function(e,t){if(!arguments.length)throw"缺少参数week！";var n=c._dt(t),a=0===e?7:e,r=0===n.getDay()?7:n.getDay();return a==r||n.setDate(n.getDate()-(r-a)),this.format(n,"yyyy-MM-dd")}},{key:"getMonthWeek",value:function(e){var t=c._dt(e),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=n.getDay(),r=n.getDate();return 0==a&&(a=7),{getMonth:n.getMonth()+1,getYear:n.getFullYear(),getWeek:Math.ceil((r+6-a)/7)}}},{key:"getYearWeek",value:function(e){var t=c._dt(e),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date(t.getFullYear(),0,1),r=Math.round((n-a)/864e5);return Math.ceil((r+(a.getDay()+1-1))/7)}},{key:"week",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:new Date;return(1<arguments.length&&void 0!==t?t:"星期")+["日","一","二","三","四","五","六"][c._dt(n).getDay()]}},{key:"month",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:new Date,a=1<arguments.length&&void 0!==t?t:"月";return["一","二","三","四","五","六","七","八","九","十","十一","十二"][c._dt(n).getMonth()]+a}},{key:"weekInfo",value:function(e){function t(e,t,n){var a=new Date(e,parseInt(t)-1,n),r=new Date(e,0,1),u=Math.round((a.valueOf()-r.valueOf())/864e5);return Math.ceil((u+(r.getDay()+1-1))/7)}var n,a,r,u,o=c._dt(e),i=o.getFullYear(),l=o.getMonth()+1,g=o.getDate(),y="",f="",D=t(i,l,g);return l<4?(y=1,f=D):l<7?(y=2,f=D-t(i,4,1),1<new Date(i,4,1).getDay()&&(f+=1)):l<10?(y=3,f=D-t(i,7,1),1<new Date(i,7,1).getDay()&&(f+=1)):(y=4,f=D-t(i,10,1),1<new Date(i,10,1).getDay()&&(f+=1)),{year:i+"-"+l+"-"+g,yearWeek:t(i,l,g),month:l,monthWeek:(n=g,a=new Date(i,parseInt(l)-1,n),r=a.getDay(),u=a.getDate(),Math.ceil((u+6-r)/7)),quarter:y,quarterWeek:f}}},{key:"getWeek",value:function(e){var t=c._dt(e),n=t.getDay(),a=n?n-1:6;t.setDate(t.getDate()-a);var r=this.format(t,"yyyy-MM-dd");return t.setDate(t.getDate()+6),{start:r,end:this.format(t,"yyyy-MM-dd")}}},{key:"previewWeek",value:function(e,t,n){var a=2<arguments.length?n:void 0;return 0<e&&e<8?(1<arguments.length&&void 0!==t?t:"周")+["一","二","三","四","五","六","日"][e-1]:void 0===a?"Invalid week":a}},{key:"previewMonth",value:function(e,t){return 0<e&&e<13?["一","二","三","四","五","六","七","八","九","十","十一","十二"][e-1]+"月":void 0===t?"Invalid month":t}},{key:"getPassDaysDate",value:function(e,t){return arguments.length?o(Array(+e+1).keys()).map(function(e){return new Date((t?new Date(t):Date.now())-864e5*e).toLocaleDateString()}).map(function(e){return e.split(/\/|-/).map(function(e){return e.padStart(2,"0")}).join("-")}).splice(1):[]}},{key:"isLeapYear",value:function(e){return!(e%(e%100?4:400))}},{key:"isTime",value:function(e){var t=e.match(/^(\d{1,2})(:)?(\d{1,2})\2(\d{1,2})$/);return null!=t&&!(24<=t[1]||60<=t[3]||60<=t[4])}},{key:"isDateTime",value:function(e){var t=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(null==t)return!1;var n=new Date(t[1],t[3]-1,t[4]);return n.getFullYear()==t[1]&&n.getMonth()+1==t[3]&&n.getDate()==t[4]}},{key:"isAllDateTime",value:function(e){var t=e.match(/^(\d{4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/);if(null==t)return!1;var n=new Date(t[1],t[3]-1,t[4],t[5],t[6],t[7]);return n.getFullYear()==t[1]&&n.getMonth()+1==t[3]&&n.getDate()==t[4]&&n.getHours()==t[5]&&n.getMinutes()==t[6]&&n.getSeconds()==t[7]}},{key:"isToday",value:function(e){return(new Date).toLocaleDateString()==new Date(e.replace(/-/g,"/")).toLocaleDateString()}},{key:"isYesterday",value:function(e){var t=new Date(new Date-864e5),n=new Date(e);return t.getYear()===n.getYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()}},{key:"compareDate",value:function(e,t){return new Date(e.replace(/-/g,"/"))<new Date(t.replace(/-/g,"/"))}},{key:"getGapDates",value:function(a,e){if(!a)return[];function r(e,t){return new Date(+new Date(e)+864e5*t).toLocaleDateString().replace(/\//g,"-")}var t=+new Date(new Date(a).toLocaleDateString()),n=e?+new Date(new Date(e).toLocaleDateString()):+new Date((new Date).toLocaleDateString());if(t==n)return[r(new Date(e?new Date:a),0)];a=t<n?new Date(t):new Date(e?n:+new Date),e=t<n?new Date(e?n:+new Date):new Date(t);var u=parseInt(Math.abs(t-n)/864e5)+1;return Array(u).fill(0).reduce(function(e,t,n){return[].concat(o(e),[r(a,n)])},[])}},{key:"when",value:function(e){var t=c._dt(e).getHours();return["凌晨","早上","上午","中午","下午","晚上","深夜"][0<=t&&t<=6?0:6<t&&t<=8?1:8<t&&t<=12?2:12<t&&t<=14?3:14<t&&t<=18?4:18<t&&t<=21?5:6]}}])&&a(e.prototype,t),n&&a(e,n),c}()});
//# sourceMappingURL=rdate.min.js.map
